<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Sintesi – L'Astrazione Funzionale | User Experience Trasparenza | AI Team Orchestrator</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Capitolo 24 del libro AI Team Orchestrator: La Sintesi – L'Astrazione Funzionale">
    <meta name="keywords" content="AI agents, sistema AI-driven, architettura AI, OpenAI SDK, team AI">
    <meta name="author" content="Daniele Pelleri">
    <meta name="robots" content="index, follow">

    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🤖</text></svg>">
    
    <!-- Open Graph -->
    <meta property="og:title" content="La Sintesi – L'Astrazione Funzionale">
    <meta property="og:description" content="Capitolo 24 del libro AI Team Orchestrator: La Sintesi – L'Astrazione Funzionale">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://books.danielepelleri.com/it/user-experience-trasparenza/sintesi-astrazione-funzionale/">
    
    <!-- Canonical -->
    <link rel="canonical" href="https://books.danielepelleri.com/it/user-experience-trasparenza/sintesi-astrazione-funzionale/">
    <link rel="alternate" hreflang="en" href="https://books.danielepelleri.com/en/user-experience-transparency/sintesi-astrazione-funzionale/">
    <link rel="alternate" hreflang="it" href="https://books.danielepelleri.com/it/user-experience-trasparenza/sintesi-astrazione-funzionale/">
    
    <style>
        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        /* Breadcrumb Navigation */
        .breadcrumb {
            background: rgba(255, 255, 255, 0.9);
            padding: 1rem 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
        }
        
        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        .breadcrumb span {
            color: #7f8c8d;
            margin: 0 0.5rem;
        }
        
        /* Chapter Header */
        .chapter-header {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            margin-bottom: 3rem;
            text-align: center;
        }
        
        .chapter-instrument {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
        
        .chapter-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #7f8c8d;
            flex-wrap: wrap;
        }
        
        .chapter-title {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 1rem;
            font-weight: 700;
            line-height: 1.2;
        }
        
        /* Content Styles */
        .chapter-content {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            margin-bottom: 3rem;
        }
        
        .chapter-content h3 {
            font-size: 2rem;
            color: #2c3e50;
            margin: 2rem 0 1rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 0.5rem;
        }
        
        .chapter-content h4 {
            font-size: 1.5rem;
            color: #495057;
            margin: 1.5rem 0 1rem;
        }
        
        .chapter-content p {
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            line-height: 1.8;
        }
        
        .chapter-content ul, .chapter-content ol {
            margin: 1.5rem 0;
            padding-left: 2rem;
        }
        
        .chapter-content li {
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin: 2rem 0;
        }
        
        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }
        
        th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
        }
        
        /* Code Styles */
        pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
            font-size: 0.9rem;
        }
        
        code {
            background: #f1f3f4;
            color: #d73a49;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        }
        
        pre code {
            background: transparent;
            color: inherit;
            padding: 0;
        }
        
        /* Special Boxes */
        .war-story, .industry-insight, .architecture-section, .key-takeaways-section {
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .war-story {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border-left: 4px solid #856404;
        }
        
        .industry-insight {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-left: 4px solid #28a745;
        }
        
        .architecture-section {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 1px solid #dee2e6;
        }
        
        .key-takeaways-section {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }
        
        /* Mermaid Container */
        .mermaid {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 10px;
            margin: 2rem 0;
            text-align: center;
        }
        
        /* Navigation */
        .chapter-nav-bottom {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 3rem 0;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .nav-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        
        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }
        
        .nav-button.secondary {
            background: rgba(255, 255, 255, 0.9);
            color: #667eea;
            border: 2px solid #667eea;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .nav-button.secondary:hover {
            background: white;
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }
        
        /* War Story Icon Styling */
        .war-story-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .war-story-icon {
            width: 1.5rem;
            height: 1.5rem;
            flex-shrink: 0;
            color: #856404;
        }
        
        /* Architecture Section Styling */
        .architecture-title {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .architecture-icon {
            width: 2rem;
            height: 2rem;
            flex-shrink: 0;
            color: #667eea;
        }
        
        /* Insight Icon Styling */
        .insight-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .insight-icon {
            width: 1.8rem;
            height: 1.8rem;
            flex-shrink: 0;
            color: #28a745;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .chapter-header,
            .chapter-content {
                padding: 2rem;
            }
            
            .chapter-title {
                font-size: 2rem;
            }
            
            .chapter-nav-bottom {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
        
        /* Reader Tools */
        .reader-tools {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .tool-button {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .tool-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }
        
        /* Bookmark Modal */
        .bookmarks-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 70vh;
            overflow-y: auto;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
        }
        
        .close-modal:hover {
            color: #333;
        }
        
        .bookmark-item {
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }
        
        .bookmark-item:last-child {
            border-bottom: none;
        }
        
        .bookmark-link {
            color: #667eea;
            text-decoration: none;
        }
        
        .bookmark-link:hover {
            text-decoration: underline;
        }
        
        /* Reading Progress Bar */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(102, 126, 234, 0.2);
            z-index: 999;
        }
        
        .reading-progress::before {
            content: '';
            display: block;
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transform-origin: left;
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        /* Dark Mode */
        body.dark-mode {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ecf0f1;
        }
        
        body.dark-mode .chapter-header,
        body.dark-mode .chapter-content,
        body.dark-mode .breadcrumb {
            background: rgba(52, 73, 94, 0.8);
            color: #ecf0f1;
        }
        
        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 1rem 2rem;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 10001;
        }
        
        .toast.show {
            transform: translateX(0);
        }
</head>
<body>
    <!-- Reading Progress Bar -->
    <div class="reading-progress" id="readingProgress"></div>
    
    <!-- Reader Tools -->
    <div class="reader-tools">
        <button class="tool-button" onclick="addBookmark()" title="I Miei Segnalibri">📚</button>
        <button class="tool-button" onclick="toggleTheme()" title="Tema">🎨</button>
        <button class="tool-button" onclick="increaseFontSize()" title="Dimensione Font +">A+</button>
        <button class="tool-button" onclick="decreaseFontSize()" title="Dimensione Font -">A-</button>
    </div>
    
    <!-- Bookmark Modal -->
    <div id="bookmarksModal" class="bookmarks-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeBookmarksModal()">&times;</span>
            <h3>📚 I Miei Segnalibri</h3>
            <div id="bookmarksList">
                <!-- Bookmarks will be populated by JavaScript -->
            </div>
        </div>
    </div>    <div class="container">
        <!-- Breadcrumb -->
        <nav class="breadcrumb">
            <a href="../../ai-team-orchestrator.html">🏠 AI Team Orchestrator</a>
            <span>›</span>
            <a href="../">🎹 User Experience Trasparenza</a>
            <span>›</span>
            <span>La Sintesi – L'Astrazione Funzionale</span>
        </nav>

        <!-- Chapter Header -->
        <header class="chapter-header">
            <div class="chapter-instrument">🎹</div>
            <div class="chapter-meta">
                <span>🎹 Movimento 3 di 4</span>
                <span>📖 Capitolo 24 di 42</span>
                <span>⏱️ ~5 min lettura</span>
                <span>📊 Livello: Avanzato</span>
            </div>
            <h1 class="chapter-title">La Sintesi – L'Astrazione Funzionale</h1>
        </header>

        <!-- Main Content -->
        <article class="chapter-content">
<p>I due capitoli precedenti hanno dimostrato un punto fondamentale: la nostra architettura era robusta non per caso, ma per scelta progettuale. Il successo sia nello scenario B2B SaaS che in quello del Fitness non è stato un colpo di fortuna, ma la diretta conseguenza di un principio architetturale che abbiamo applicato con rigore fin dall'inizio: l'<strong>Astrazione Funzionale</strong>.</p>

<div class="war-story">
    <div class="war-story-header">
        <svg class="war-story-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
            <line x1="12" y1="9" x2="12" y2="13"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
        </svg>
        <h4>"War Story": War Story</h4>
    </div>
    <div class="war-story-content">
        <p>Questo capitolo non è una "War Story", ma una riflessione più profonda sulla lezione più importante che abbiamo imparato in materia di scalabilità e universalità.</p>
    </div>
</div>

<h3>Il Problema: Il "Peccato Originale" del Software AI</h3>

<p>Il "peccato originale" di molti sistemi AI è legare la logica del codice al dominio di business. Si inizia con un'idea specifica, ad esempio "costruiamo un assistente per il marketing", e si finisce con un codice pieno di funzioni come <code>generate_marketing_email()</code> o <code>analyze_customer_segments()</code>.</p>

<p>Questo approccio funziona bene per il primo caso d'uso, ma diventa un incubo di debito tecnico non appena il business chiede di espandersi in un nuovo settore. Per supportare un cliente nel settore finanziario, si è costretti a scrivere nuove funzioni come <code>analyze_stock_portfolio()</code> e <code>generate_financial_report()</code>, duplicando la logica e creando un sistema fragile e difficile da mantenere.</p>

<h3>La Soluzione: Disaccoppiare il "Come" dal "Cosa"</h3>

<p>La nostra soluzione è stata quella di disaccoppiare completamente la logica strutturale (il "come" un'operazione viene eseguita) dal contenuto di dominio (il "cosa" viene prodotto).</p>

<table>
<thead>
<tr>
<th>Componente del Sistema</th>
<th>Responsabilità</th>
<th>Esempio</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Codice Python (Backend)</strong></td>
<td>Gestisce la <strong>Struttura</strong> (il "Come")</td>
<td>Fornisce una funzione generica <code>execute_report_generation_task(topic, structure)</code>. Questa funzione sa come strutturare un report (es. titolo, introduzione, sezioni), ma non sa nulla di marketing o finanza.</td>
</tr>
<tr>
<td><strong>AI (LLM + Prompt)</strong></td>
<td>Gestisce il <strong>Contesto</strong> (il "Cosa")</td>
<td>Riceve il comando di eseguire <code>execute_report_generation_task</code> con parametri specifici del dominio: <code>topic="Analisi Competitori SaaS"</code>, <code>structure=["Panoramica", "Analisi SWOT"]</code>. È l'AI a riempire la struttura con contenuti pertinenti.</td>
</tr>
</tbody>
</table>

<p>Questo approccio trasforma il nostro backend in un <strong>motore di capacità funzionali universali</strong>.</p>

<p><strong>Le Nostre Capacità Funzionali Core:</strong></p>

<ul>
<li><code>web_search_preview</code>: Ricerca informazioni aggiornate sul web tramite API (DuckDuckGo).</li>
<li><code>code_interpreter</code>: Esegue codice Python in ambiente sandbox per analisi dati e calcoli.</li>
<li><code>file_search</code> & <code>document_tools</code>: Gestione e ricerca intelligente di documenti nel workspace.</li>
<li><code>analyze_hashtags</code> & <code>social_media_tools</code>: Analisi universale di social media (Instagram, Twitter, LinkedIn, TikTok).</li>
<li><code>generate_content_ideas</code>: Generazione di contenuti strutturati per qualsiasi piattaforma.</li>
<li><code>image_generation</code>: Creazione di immagini tramite DALL-E per contenuti visivi.</li>
<li><code>dynamic_tool_registry</code>: Creazione e registrazione dinamica di nuovi strumenti tramite codice.</li>
</ul>

<p>Il nostro sistema non ha una funzione per "scrivere email marketing". Ha una funzione per "generare contenuti social", e "scrivere un'email" è solo uno dei tanti modi in cui questa capacità può essere utilizzata. Allo stesso modo, <code>analyze_hashtags</code> non è specifico per Instagram: funziona per qualsiasi piattaforma social.</p>

<h3>Il Ruolo dell'AI come "Livello di Traduzione"</h3>

<p>In questa architettura, l'AI assume un ruolo cruciale e sofisticato: agisce come un <strong>livello di traduzione bidirezionale</strong>.</p>

<div class="architecture-section">
    <div class="architecture-title">
        <svg class="architecture-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <line x1="9" y1="9" x2="15" y2="9"/>
            <line x1="9" y1="12" x2="15" y2="12"/>
            <line x1="9" y1="15" x2="15" y2="15"/>
        </svg>
        <h4>Architettura del Sistema</h4>
    </div>
    
    <div class="mermaid">
        graph TD
            A[Utente (Linguaggio di Dominio)] -- "Voglio una campagna email" --> B{AnalystAgent} B -- Traduce in --> C[Comando Funzionale: `generate_content_ideas`] C --> D[Backend (Logica Strutturale)] D -- Esegue e prepara il contesto --> E{SpecialistAgent} E -- Traduce in --> F[Output (Linguaggio di Dominio)] F -- "Ecco il contenuto per la tua campagna social..." --> A
    </div>
</div>

<p>Questo è il cuore del nostro <strong>Pilastro #2 (AI-Driven, zero hard-coding)</strong> e del <strong>Pilastro #3 (Universale &amp; Language-Agnostic)</strong>. L'intelligenza non è nel nostro codice Python; è nella capacità dell'AI di mappare il linguaggio umano di un dominio specifico alle capacità funzionali e astratte della nostra piattaforma.</p>

<div class="key-takeaways-section">
    <h4 class="key-takeaways-title">📝 Key Takeaways del Capitolo:</h4>
    <div class="key-takeaways-content"><p class="takeaway-item">✓ <strong>L'Astrazione Funzionale è la Chiave dell'Universalità:</strong> Se vuoi costruire un sistema che funzioni in più domini, astrai la tua logica in capacità funzionali generiche.</p>
<p class="takeaway-item">✓ <strong>Disaccoppia il "Come" dal "Cosa":</strong> Lascia che il tuo codice gestisca la struttura e l'orchestrazione (il "come"), e che l'AI gestisca il contenuto e il contesto specifico del dominio (il "cosa").</p>
<p class="takeaway-item">✓ <strong>L'AI è il Tuo Livello di Traduzione:</strong> Sfrutta la capacità degli LLM di comprendere il linguaggio naturale per tradurre le richieste degli utenti in comandi eseguibili dalla tua architettura funzionale.</p>
<p class="takeaway-item">✓ <strong>Evita il "Peccato Originale":</strong> Resisti alla tentazione di nominare le tue funzioni e le tue classi con termini specifici di un dominio di business. Usa sempre nomi funzionali e generici.</p>
    </div>
</div>

<div class="strategic-insight">
    <div class="insight-header">
        <svg class="insight-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12,6 12,12 16,14"/>
        </svg>
        <h4>🎯 Il Copilot come Nuova UI: Chiudere il Cerchio</h4>
    </div>
    <div class="insight-content">
        <p>Ritorniamo alla vision di <strong>Satya Nadella</strong> citata nel Capitolo 1: <em>"I modelli diventano commodity; tutto il valore verrà creato da come li indirizzi, contestualizzi e affini con i tuoi dati e processi."</em></p>
        
        <p>Quello che abbiamo costruito nei capitoli B2B e Fitness non è solo un sistema AI: è l'incarnazione di questa filosofia. La nostra piattaforma dimostra che il valore non sta in GPT-4 o Claude in sé, ma nell'<strong>orchestrazione tra AI e flussi umani</strong>.</p>
        
        <p>L'astrazione funzionale che abbiamo raggiunto trasforma ogni interaction point in un "Copilot Layer" - dove l'AI non sostituisce l'umano, ma amplifica le sue capacità attraverso un'interfaccia conversazionale che comprende il dominio e traduce l'intent in azioni concrete.</p>
        
        <p>Il Copilot è davvero la nuova UI, e il nostro sistema AI Team Orchestrator rappresenta l'architettura che rende questa visione scalabile e universale.</p>
    </div>
</div>

<p><strong>Conclusione del Capitolo</strong></p>

<p>Questa profonda comprensione dell'astrazione funzionale è stata la nostra "sintesi" finale, la lezione chiave emersa dal confronto tra la tesi (il successo nel B2B) e l'antitesi (il successo nel fitness).</p>

<p>Con questa consapevolezza, eravamo pronti a guardare indietro al nostro sistema non solo come sviluppatori, ma come veri architetti, cercando le ultime opportunità per ottimizzare, semplificare e rendere la nostra creazione ancora più elegante.</p>
            </div>

            
        </article>

        <!-- Bottom Navigation -->
        <nav class="chapter-nav-bottom">
            <a href="../antitesi-fitness-sfidare-limiti/" class="nav-button secondary">← Capitolo Precedente</a>
            <a href="../bivio-architetturale-qa-chain/" class="nav-button">Prossimo Capitolo →</a>
        </nav>
    </div>

    <!-- Mermaid.js for diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#667eea',
                lineColor: '#7f8c8d',
                secondaryColor: '#f8f9fa',
                tertiaryColor: '#ffffff'
            }
        });
    </script>

    <!-- Prism.js for code highlighting -->
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <!-- Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VEGK4VZMG0"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-VEGK4VZMG0');
        
        gtag('event', 'chapter_start', {
            'chapter_title': 'La Sintesi – L'Astrazione Funzionale',
            'movement': 'user-experience-trasparenza',
            'chapter_number': 24
        });
    </script>
</body>
    
    <script>
        // Reading Progress
        function updateReadingProgress() {
            const article = document.querySelector('.chapter-content');
            const progress = document.getElementById('readingProgress');
            
            if (article && progress) {
                const articleTop = article.offsetTop;
                const articleHeight = article.offsetHeight;
                const windowTop = window.pageYOffset;
                const windowHeight = window.innerHeight;
                
                const articleBottom = articleTop + articleHeight;
                const windowBottom = windowTop + windowHeight;
                
                let progressPercentage = 0;
                
                if (windowTop >= articleTop && windowTop <= articleBottom) {
                    progressPercentage = ((windowTop - articleTop) / articleHeight) * 100;
                } else if (windowBottom >= articleBottom) {
                    progressPercentage = 100;
                }
                
                progress.style.transform = `scaleX(${Math.min(progressPercentage / 100, 1)})`;
            }
        }
        
        window.addEventListener('scroll', updateReadingProgress);
        window.addEventListener('load', updateReadingProgress);
        
        // Font Size Controls
        let currentFontSize = 1.1;
        
        function increaseFontSize() {
            currentFontSize = Math.min(currentFontSize + 0.1, 2.0);
            applyFontSize();
        }
        
        function decreaseFontSize() {
            currentFontSize = Math.max(currentFontSize - 0.1, 0.8);
            applyFontSize();
        }
        
        function applyFontSize() {
            const content = document.querySelector('.chapter-content');
            if (content) {
                const paragraphs = content.querySelectorAll('p, li');
                paragraphs.forEach(p => {
                    p.style.fontSize = currentFontSize + 'rem';
                });
            }
            localStorage.setItem('fontSize', currentFontSize.toString());
        }
        
        // Theme Toggle
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDark.toString());
            showToast(isDark ? 'Modalità scura attivata' : 'Modalità chiara attivata');
        }
        
        // Bookmarks
        function toggleBookmarks() {
            const modal = document.getElementById('bookmarksModal');
            modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
            loadBookmarks();
        }
        
        function closeBookmarksModal() {
            document.getElementById('bookmarksModal').style.display = 'none';
        }
        
        function addBookmark() {
            const title = document.querySelector('.chapter-title').textContent;
            const url = window.location.href;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
            
            // Check if bookmark already exists
            const exists = bookmarks.find(b => b.url === url);
            if (exists) {
                showToast('Segnalibro rimosso!');
                bookmarks = bookmarks.filter(b => b.url !== url);
            } else {
                showToast('Segnalibro salvato!');
                bookmarks.push({
                    title: title,
                    url: url,
                    timestamp: new Date().toISOString()
                });
            }
            
            localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
        }
        
        function loadBookmarks() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
            const container = document.getElementById('bookmarksList');
            
            if (bookmarks.length === 0) {
                container.innerHTML = '<p>Nessun segnalibro salvato.</p>';
                return;
            }
            
            container.innerHTML = bookmarks
                .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
                .map(bookmark => `
                    <div class="bookmark-item">
                        <a href="${bookmark.url}" class="bookmark-link">${bookmark.title}</a>
                    </div>
                `).join('');
        }
        
        // Toast Notifications
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 2000);
        }
        
        // Load saved preferences
        window.addEventListener('load', function() {
            // Load font size
            const savedFontSize = localStorage.getItem('fontSize');
            if (savedFontSize) {
                currentFontSize = parseFloat(savedFontSize);
                applyFontSize();
            }
            
            // Load theme
            const isDark = localStorage.getItem('darkMode') === 'true';
            if (isDark) {
                document.body.classList.add('dark-mode');
            }
        });
    </script>
</html>