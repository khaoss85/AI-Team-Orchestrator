<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter Title | AI Team Orchestrator</title>
    
    <!-- Performance-Critical Resource Hints -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    
    <!-- Optimized CSS Loading -->
    <link rel="preload" href="/shared-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/shared-styles.css"></noscript>
    
    <!-- Inline Critical CSS Only (Above-the-fold content) -->
    <style>
        /* Critical CSS for immediate rendering */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            background: #fff;
        }
        .container { 
            max-width: 100%;
            padding: 1rem;
            margin: 0 auto;
        }
        .chapter-header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 2rem 1rem;
            text-align: center;
            border-radius: 12px;
            margin-bottom: 2rem;
        }
        .chapter-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            line-height: 1.2;
        }
        @media (min-width: 576px) {
            .chapter-title { font-size: 2.5rem; }
        }
        @media (min-width: 768px) {
            .chapter-title { font-size: 3rem; }
            .container { max-width: 720px; padding: 1.5rem; }
        }
    </style>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Chapter description optimized for search engines">
    <meta name="keywords" content="AI agents, performance optimization, caching">
    <meta name="author" content="Daniele Pelleri">
    <meta name="robots" content="index, follow">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ñ</text></svg>">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Chapter Title">
    <meta property="og:description" content="Chapter description">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://books.danielepelleri.com/en/chapter/">
    
    <!-- Canonical -->
    <link rel="canonical" href="https://books.danielepelleri.com/en/chapter/">
    <link rel="alternate" hreflang="en" href="https://books.danielepelleri.com/en/chapter/">
    <link rel="alternate" hreflang="it" href="https://books.danielepelleri.com/it/capitolo/">
    
    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "Chapter Title",
      "description": "Chapter description",
      "author": {
        "@type": "Person",
        "name": "Daniele Pelleri"
      },
      "datePublished": "2025-08-29",
      "url": "https://books.danielepelleri.com/en/chapter/"
    }
    </script>
    
    <!-- Optimized Analytics (Deferred) -->
    <script defer src="https://www.googletagmanager.com/gtag/js?id=G-VEGK4VZMG0"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-VEGK4VZMG0', {
            page_title: document.title,
            page_location: window.location.href
        });
    </script>
</head>
<body>
    <!-- Reading Progress Bar -->
    <div class="reading-progress">
        <div class="progress-fill" id="progressFill"></div>
    </div>

    <div class="container">
        <!-- Breadcrumb Navigation -->
        <nav class="breadcrumb" aria-label="Breadcrumb">
            <a href="/en/">Home</a> > 
            <a href="/en/memory-system-scaling/">Memory System Scaling</a> > 
            <span>Chapter Title</span>
        </nav>

        <!-- Chapter Header -->
        <header class="chapter-header">
            <h1 class="chapter-title">Chapter Title</h1>
            <p class="chapter-subtitle">Subtitle with clear description</p>
        </header>

        <!-- Chapter Content -->
        <article class="chapter-content">
            <h2>Section Title</h2>
            <p>Content optimized for mobile-first reading experience...</p>
            
            <!-- Code Example with Syntax Highlighting -->
            <pre><code class="language-python">
# Example code with proper indentation
def optimize_performance():
    return "Better Core Web Vitals"
            </code></pre>
            
            <h3>Subsection</h3>
            <p>More content with proper semantic structure...</p>
        </article>

        <!-- Chapter Navigation -->
        <nav class="chapter-nav-bottom" aria-label="Chapter Navigation">
            <a href="../previous-chapter/" class="nav-button secondary">
                ‚Üê Previous: Chapter Name
            </a>
            <a href="../next-chapter/" class="nav-button">
                Next: Chapter Name ‚Üí
            </a>
        </nav>
    </div>

    <!-- Touch-Optimized Reader Tools -->
    <aside class="reader-tools" aria-label="Reading Tools">
        <button class="tool-button" id="bookmarkBtn" aria-label="Bookmark this chapter" title="Bookmark">
            üìñ
        </button>
        <button class="tool-button" id="themeBtn" aria-label="Toggle theme" title="Theme">
            üåô
        </button>
        <button class="tool-button" id="fontBtn" aria-label="Font size" title="Font Size">
            üî§
        </button>
        <button class="tool-button" id="shareBtn" aria-label="Share chapter" title="Share">
            üì§
        </button>
    </aside>

    <!-- Modal for Settings -->
    <div class="modal" id="settingsModal" role="dialog" aria-labelledby="modalTitle" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h2 class="modal-title" id="modalTitle">Reading Settings</h2>
                <button class="close-button" aria-label="Close settings">√ó</button>
            </header>
            <div class="modal-body">
                <p>Settings content...</p>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast" id="toast" role="alert" aria-live="polite"></div>

    <!-- Deferred JavaScript Loading -->
    <script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
    
    <!-- Optimized Reader Tools JavaScript -->
    <script>
        // Throttled scroll handler for better performance
        let isScrolling = false;
        
        function updateProgress() {
            if (!isScrolling) {
                requestAnimationFrame(() => {
                    const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                    const scrolled = (winScroll / height) * 100;
                    
                    const progressFill = document.getElementById('progressFill');
                    if (progressFill) {
                        progressFill.style.width = scrolled + '%';
                    }
                    isScrolling = false;
                });
                isScrolling = true;
            }
        }
        
        // Optimized event listeners
        document.addEventListener('scroll', updateProgress, { passive: true });
        
        // Touch-optimized button handlers
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize reader tools functionality
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const themeBtn = document.getElementById('themeBtn');
            const fontBtn = document.getElementById('fontBtn');
            const shareBtn = document.getElementById('shareBtn');
            
            // Add event listeners with proper error handling
            if (bookmarkBtn) {
                bookmarkBtn.addEventListener('click', handleBookmark);
            }
            if (themeBtn) {
                themeBtn.addEventListener('click', handleTheme);
            }
            if (fontBtn) {
                fontBtn.addEventListener('click', handleFont);
            }
            if (shareBtn) {
                shareBtn.addEventListener('click', handleShare);
            }
        });
        
        function handleBookmark() {
            // Bookmark functionality
            showToast('Bookmark saved!');
        }
        
        function handleTheme() {
            // Theme toggle functionality
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
        }
        
        function handleFont() {
            // Font size adjustment
            const currentSize = parseInt(getComputedStyle(document.body).fontSize);
            const newSize = currentSize >= 20 ? 16 : currentSize + 2;
            document.body.style.fontSize = newSize + 'px';
            localStorage.setItem('fontSize', newSize);
        }
        
        function handleShare() {
            if (navigator.share) {
                navigator.share({
                    title: document.title,
                    url: window.location.href
                });
            } else {
                // Fallback copy to clipboard
                navigator.clipboard.writeText(window.location.href);
                showToast('Link copied to clipboard!');
            }
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            if (toast) {
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => toast.classList.remove('show'), 3000);
            }
        }
        
        // Load user preferences
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
            }
            
            const savedFontSize = localStorage.getItem('fontSize');
            if (savedFontSize) {
                document.body.style.fontSize = savedFontSize + 'px';
            }
        });
    </script>
</body>
</html>